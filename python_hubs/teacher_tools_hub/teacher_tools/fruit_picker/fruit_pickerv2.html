<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
<title>Citrus Picker â€” Dual Tray Zenith (Offline)</title>
<style>
  :root{
    --bg:#f3f4f6;
    --card:#ffffff;
    --ink:#111827;
    --muted:#6b7280;
    --border:#d1d5db;
    --shadow: 0 10px 30px rgba(0,0,0,.08);
    --good:#16a34a;
    --bad:#dc2626;
    --warn:#f59e0b;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    background:var(--bg);
    color:var(--ink);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    user-select:none;
    touch-action: manipulation;
  }
  header{
    position:sticky; top:0; z-index:10;
    background:linear-gradient(#fff, rgba(255,255,255,.92));
    border-bottom:1px solid var(--border);
    padding:10px 12px;
  }
  .wrap{max-width:1040px;margin:0 auto;padding:12px;}
  .row{display:grid;gap:12px;}
  @media(min-width:900px){
    .row{grid-template-columns: 1.25fr .75fr;}
  }
  .card{
    background:var(--card);
    border:1px solid var(--border);
    border-radius:16px;
    box-shadow:var(--shadow);
    overflow:hidden;
  }
  .hd{
    padding:10px 12px;
    border-bottom:1px solid var(--border);
    display:flex;align-items:center;justify-content:space-between;gap:10px;
  }
  .title{font-weight:950;letter-spacing:.2px}
  .sub{color:var(--muted);font-size:12px;line-height:1.25}
  .pill{
    font-size:12px;
    padding:6px 10px;
    border:1px solid var(--border);
    border-radius:999px;
    background:#fff;
    color:var(--ink);
    white-space:nowrap;
  }
  .pill b{font-weight:950}
  .body{padding:12px}
  .btns{display:flex;flex-wrap:wrap;gap:8px}
  button{
    appearance:none;
    border:1px solid var(--border);
    background:#fff;
    color:var(--ink);
    border-radius:12px;
    padding:10px 12px;
    font-weight:900;
    cursor:pointer;
  }
  button.primary{
    background:#111827;
    color:#fff;
    border-color:#111827;
  }
  button:active{transform:translateY(1px)}
  select{
    border:1px solid var(--border);
    border-radius:12px;
    padding:10px 12px;
    background:#fff;
    font-weight:900;
  }

  /* Game */
  .game{
    position:relative;
    height:520px;
    border:1px dashed var(--border);
    border-radius:16px;
    background:
      radial-gradient(circle at 20% 20%, rgba(0,0,0,.04), transparent 45%),
      radial-gradient(circle at 80% 30%, rgba(0,0,0,.03), transparent 50%),
      linear-gradient(#fff, #fafafa);
    overflow:hidden;
    touch-action:none; /* reduce drag misfires */
  }

  /* Abort X (triple tap) */
  .abort{
    position:absolute;
    top:10px; right:10px;
    width:40px;height:40px;
    border-radius:12px;
    border:2px solid rgba(0,0,0,.25);
    background:#fff;
    display:grid;place-items:center;
    font-weight:950;
    color:#111827;
    cursor:pointer;
    z-index:5;
  }
  .abort small{
    position:absolute;
    bottom:-18px; right:0;
    font-size:11px;
    color:var(--muted);
    white-space:nowrap;
  }
  .abort.hot{
    border-color:var(--bad);
    box-shadow:0 0 0 3px rgba(220,38,38,.18);
  }

  /* Fruit */
  .fruit{
    position:absolute;
    width:66px;height:66px;
    display:grid;place-items:center;
    font-size:40px;
    filter: drop-shadow(0 8px 10px rgba(0,0,0,.18));
    border-radius:16px;
    background:rgba(255,255,255,.96);
    border:1px solid rgba(0,0,0,.10);
    transform:translate(-50%,-50%);
    cursor:grab;
    will-change:left, top;
  }
  .fruit:active{cursor:grabbing}

  /* Bottom zones container */
  .zones{
    position:absolute;
    left:50%;
    bottom:14px;
    transform:translateX(-50%);
    width:min(980px, 96%);
    display:grid;
    grid-template-columns: 1fr 1.2fr;
    gap:10px;
    z-index:3;
    pointer-events:none; /* only inner zones clickable */
  }

  /* Left Match Tray (4 slots, exact match) */
  .match{
    pointer-events:auto;
    height:132px;
    border-radius:18px;
    border:3px solid #111827;
    background: linear-gradient(135deg, rgba(0,0,0,.06), rgba(0,0,0,.02));
    padding:10px 12px;
    display:flex;
    flex-direction:column;
    gap:8px;
  }
  .match .top{
    display:flex;align-items:center;justify-content:space-between;gap:10px;
  }
  .match .top b{font-size:13px}
  .match .top span{font-size:12px;color:var(--muted)}
  .slots{
    display:grid;
    grid-template-columns: repeat(4, 1fr);
    gap:8px;
    flex:1;
  }
  .mslot{
    border-radius:14px;
    border:2px dashed rgba(0,0,0,.35);
    background:rgba(255,255,255,.78);
    display:grid;
    place-items:center;
    text-align:center;
    overflow:hidden;
    position:relative;
    min-height:70px;
  }
  .mslot .need{
    font-size:22px;
    line-height:1;
  }
  .mslot .fill{
    position:absolute;
    inset:0;
    display:grid;
    place-items:center;
    font-size:30px;
    background:rgba(255,255,255,.90);
    border-radius:12px;
    opacity:0;
    transform:scale(.98);
    transition:opacity .12s ease;
  }
  .mslot.filled .fill{opacity:1}
  .mslot.hot{
    border-color:var(--good);
    box-shadow:0 0 0 3px rgba(22,163,74,.18);
  }

  /* Right Drop Tray (goal 10) */
  .drop{
    pointer-events:auto;
    height:132px;
    border-radius:18
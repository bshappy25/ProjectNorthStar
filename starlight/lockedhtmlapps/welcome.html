<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>SLDConnect Creator Intake ‚ú¶</title>

  <style>
    /* =============== PRINTESSA-FRIENDLY THEME (LIGHT) =============== */
    :root{
      --bg: #f6f0e6;          /* vintage paper */
      --bg2:#fff8ef;          /* soft cream */
      --card:#ffffff;         /* white boxes */
      --border:#c9c1b5;       /* warm gray */
      --text:#111111;         /* black text */
      --muted:#4b4b4b;        /* readable muted */

      /* Light purple accent (replaces blue) */
      --accent:#c7a6ff;       /* light purple */
      --accent2:#eddcff;      /* soft lilac */
      --danger:#b00020;

      /* Portal tint chips (subtle) */
      --emerald:#1ee3a8;
      --amethyst:#9b6bff;
      --onyx:#111111;
      --ruby:#ff4d6d;
      --sapphire:#1ea7ff;
    }

    *{ box-sizing:border-box; margin:0; padding:0; }
    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      min-height:100vh;
      padding:18px;
      display:flex;
      justify-content:center;
      align-items:flex-start;

      /* light vintage background */
      background:
        radial-gradient(1200px 800px at 10% 10%, rgba(199,166,255,.14), transparent 55%),
        radial-gradient(1000px 700px at 90% 15%, rgba(155,107,255,.10), transparent 55%),
        linear-gradient(135deg, var(--bg2), var(--bg));
    }

    .app{ width:min(1100px,100%); }

    /* Top header */
    .topbar{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:14px;
      margin-bottom:14px;
    }
    .brand h1{
      font-size: clamp(30px, 4vw, 46px);
      letter-spacing:.2px;
      line-height:1.05;
      display:flex;
      align-items:center;
      gap:10px;
    }
    .brand p{
      margin-top:8px;
      color: var(--muted);
      max-width:80ch;
      line-height:1.35;
      font-weight:650;
    }

    .barBtns{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
      align-items:center;
    }

    .btn{
      border:2px solid rgba(17,17,17,.14);
      background: rgba(255,255,255,.90);
      color: var(--text);
      padding:10px 14px;
      border-radius:999px;
      font-weight:900;
      cursor:pointer;
      transition: transform .12s ease, box-shadow .12s ease;
      box-shadow: 0 10px 24px rgba(0,0,0,.08);
      user-select:none;
    }
    .btn:hover{ transform:translateY(-2px); }
    .btn:active{ transform:translateY(0px); }

    .btn.primary{
      border:0;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color:#1b1023;
    }

    /* Signet button (3 taps can reveal tray later, optional) */
    .adminRow{
      margin-top:10px;
      display:flex;
      align-items:center;
      gap:10px;
    }
    .iconBtn{
      width:46px; height:46px;
      border-radius:14px;
      border:2px solid rgba(17,17,17,.14);
      background: rgba(255,255,255,.90);
      color: var(--text);
      cursor:pointer;
      box-shadow: 0 10px 24px rgba(0,0,0,.08);
      display:flex;
      align-items:center;
      justify-content:center;
      user-select:none;
      transition: transform .12s ease;
      position:relative;
    }
    .iconBtn:hover{ transform:translateY(-2px); }

    /* Sigillum mark inside the icon button */
    .sigMark{
      width:26px; height:26px;
      position:relative;
      border-radius:50%;
      border:4px solid #111;
      background: transparent;
    }
    .sigMark::after{
      content:"";
      width:6px; height:6px;
      background:#111;
      border-radius:50%;
      position:absolute;
      left:50%; top:50%;
      transform:translate(-50%,-50%);
    }
    .ray{
      position:absolute;
      height:5px; width:16px;
      background:#111;
      border-radius:999px;
    }
    .ray.left{ left:-18px; top:50%; transform:translateY(-50%); }
    .ray.tr{ right:-14px; top:-2px; transform:rotate(-45deg); }
    .ray.br{ right:-10px; bottom:-4px; transform:rotate(70deg); }

    /* SECRET TRAY (kept, but you can delete later) */
    .secretTray{
      display:none;
      margin-top:10px;
      gap:10px;
      flex-wrap:wrap;
      align-items:stretch;
    }
    .secretTray.active{ display:flex; }

    .secretBlock{
      flex: 1 1 280px;
      background: rgba(255,255,255,.92);
      border:2px solid rgba(17,17,17,.14);
      border-radius:16px;
      padding:12px;
      box-shadow: 0 10px 24px rgba(0,0,0,.08);
      position:relative;
    }
    .secretBlock::before{
      content:"";
      position:absolute;
      left:12px; right:12px; top:12px;
      height:6px;
      border-radius:999px;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      opacity:.95;
    }
    .secretBlock h3{
      margin-top:16px;
      font-size:1rem;
      font-weight:1000;
      display:flex;
      align-items:center;
      gap:10px;
    }
    .secretHint{
      margin-top:8px;
      color: var(--muted);
      font-weight:700;
      font-size:.92rem;
      line-height:1.3;
    }

    /* Grid */
    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:14px;
    }
    .card{
      background: var(--card);
      border:2px solid rgba(201,193,181,.9);
      border-radius:18px;
      padding:14px;
      box-shadow: 0 14px 40px rgba(0,0,0,.08);
      position:relative;
    }

    /* Accent bar (light purple) */
    .card::before{
      content:"";
      position:absolute;
      left:10px; right:10px; top:10px;
      height:6px;
      border-radius:999px;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
    }

    .card.big{ grid-column: 1 / -1; }

    .card h2{
      font-size:1.05rem;
      letter-spacing:.2px;
      margin-top:12px;
      margin-bottom:10px;
      display:flex;
      align-items:center;
      gap:8px;
    }
    .muted{ color: var(--muted); font-size:.95rem; line-height:1.35; font-weight:650; }

    label{ font-weight:900; font-size:.95rem; color: var(--text); }
    input[type="text"], input[type="email"], input[type="tel"], textarea, select{
      width:100%;
      margin-top:8px;
      border-radius:14px;
      border:2px solid rgba(201,193,181,.95);
      background: #fff;
      color: var(--text);
      padding:12px;
      outline:none;
      transition: border-color .12s ease, box-shadow .12s ease;
      font-size:1rem;
    }
    input:focus, textarea:focus, select:focus{
      border-color: rgba(199,166,255,.85);
      box-shadow: 0 0 0 4px rgba(199,166,255,.18);
    }
    textarea{ min-height: 120px; resize: vertical; line-height:1.45; }

    .split{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
      align-items:start;
      margin-top:8px;
    }

    /* Portal chips */
    .portalRow{
      display:grid;
      grid-template-columns: repeat(5, minmax(0,1fr));
      gap:10px;
      margin-top:10px;
    }
    .portalChip{
      border-radius:14px;
      border:2px solid rgba(201,193,181,.9);
      background:#fff;
      padding:10px 10px;
      font-weight:950;
      cursor:pointer;
      display:flex;
      flex-direction:column;
      gap:6px;
      transition: transform .12s ease;
      user-select:none;
    }
    .portalChip:hover{ transform:translateY(-2px); }
    .chipTag{ font-size:.82rem; font-weight:800; color:var(--muted); }
    .dot{
      width:10px;height:10px;border-radius:50%;
      display:inline-block; margin-right:8px;
      vertical-align:middle;
    }

    /* Output */
    .outputBox{
      white-space:pre-wrap;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size:14px;
      line-height:1.55;
      min-height:260px;
    }

    /* Footer */
    .footer{
      margin-top:14px;
      text-align:center;
      color: var(--muted);
      font-weight:800;
      font-size:.95rem;
    }

    /* =============== MODAL (spring + glass ripple) =============== */
    .overlay{
      position:fixed; inset:0;
      background: rgba(0,0,0,.45);
      backdrop-filter: blur(6px);
      display:none;
      align-items:center;
      justify-content:center;
      padding:18px;
      z-index:9999;
    }
    .overlay[data-open="true"]{ display:flex; }

    .modal{
      width:min(720px,100%);
      background: rgba(255,255,255,.92);
      border:2px solid rgba(17,17,17,.14);
      border-radius:18px;
      box-shadow: 0 30px 90px rgba(0,0,0,.28);
      overflow:hidden;
      position:relative;
      transform: translateY(10px) scale(.92);
      opacity:0;
      animation: springIn .38s cubic-bezier(.18,1.35,.4,1) forwards;
    }
    @keyframes springIn{
      to{ transform: translateY(0px) scale(1); opacity:1; }
    }

    /* ripple layer */
    .modal::before{
      content:"";
      position:absolute;
      inset:-30%;
      background:
        radial-gradient(circle at var(--rx, 50%) var(--ry, 30%),
          rgba(199,166,255,.28), transparent 55%);
      filter: blur(10px);
      pointer-events:none;
    }

    .mHead{
      padding:14px 14px 10px;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
    }
    .mTitle{ font-size:1.1rem; font-weight:1000; }
    .mSub{ margin-top:6px; color:var(--muted); font-weight:750; }
    .mClose{
      width:42px;height:42px;
      border-radius:14px;
      border:2px solid rgba(17,17,17,.14);
      background:#fff;
      cursor:pointer;
      font-weight:1000;
      font-size:18px;
    }
    .mBody{ padding:0 14px 14px; }
    .mText{
      background:#fff;
      border:2px solid rgba(201,193,181,.9);
      border-radius:14px;
      padding:12px;
      line-height:1.5;
      font-weight:700;
    }
    .mFoot{
      padding:0 14px 14px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-end;
    }

    /* PRINT: keep output clean, hide UI buttons + modal */
    @media print{
      .barBtns, .adminRow, .secretTray, .overlay{ display:none !important; }
      body{ padding:0; background:#fff; }
      .card{ box-shadow:none; }
      .footer{ margin-top:10px; }
    }

    @media (max-width: 980px){
      .grid{ grid-template-columns:1fr; }
      .split{ grid-template-columns:1fr; }
      .barBtns{ justify-content:flex-start; }
      .portalRow{ grid-template-columns: repeat(2, minmax(0,1fr)); }
    }
  </style>
</head>

<body>
  <div class="app">

    <div class="topbar">
      <div class="brand">
        <h1>SLDConnect Creator Intake <span aria-hidden="true">‚ú¶</span></h1>
        <p>
          This mini app collects a creator‚Äôs profile in a clean ‚Äúresume output‚Äù format.
          Fill the fields ‚Üí generate output ‚Üí copy or email it back.
        </p>

        <!-- Signet button exists but NO helper text -->
        <div class="adminRow">
          <button class="iconBtn" id="signetBtn" title="Signet">
            <span class="sigMark" aria-hidden="true">
              <span class="ray left"></span>
              <span class="ray tr"></span>
              <span class="ray br"></span>
            </span>
          </button>
        </div>

        <!-- SECRET TRAY placeholder (optional; keep for later) -->
        <div class="secretTray" id="secretTray">
          <div class="secretBlock">
            <h3>OUTPUT RULES <span aria-hidden="true">üßæ</span></h3>
            <div class="secretHint">
              Output must be exactly: Objective, Knowledge Base, Experience, Skills (Media), Abilities to Contribute,
              then ‚ÄúMost Interested Portal‚Äù and the footer line.
            </div>
          </div>
        </div>
      </div>

      <div class="barBtns">
        <button class="btn" id="copyBtn" type="button">üìã Copy Output</button>
        <button class="btn" id="emailBtn" type="button">‚úâÔ∏è Send Email</button>
        <button class="btn primary" id="printBtn" type="button">üñ®Ô∏è Print / Save PDF</button>
      </div>
    </div>

    <div class="grid">

      <!-- CONTACT -->
      <section class="card">
        <h2>üìù Contact Info</h2>
        <label for="fullName">Creator Name</label>
        <input id="fullName" type="text" placeholder="Maya Chen" maxlength="60" />

        <label for="email" style="margin-top:10px;">Email (optional)</label>
        <input id="email" type="email" placeholder="maya.chen@email.com" maxlength="70" />

        <label for="phone" style="margin-top:10px;">Phone (optional)</label>
        <input id="phone" type="tel" placeholder="(555) 987-6543" maxlength="22" />
      </section>

      <!-- LINE 1 -->
      <section class="card">
        <h2>üéØ Line 1 ‚Äî Objective / Intention</h2>
        <label for="objective">One clear sentence.</label>
        <textarea id="objective" placeholder="Example: I create multimedia stories that help people understand the world."></textarea>
      </section>

      <!-- LINE 2 -->
      <section class="card big">
        <h2>üìö Line 2 ‚Äî Knowledge Base</h2>
        <div class="muted">What foundations do you know? (topics, workflows, tools, theory)</div>
        <textarea id="knowledge" placeholder="Example: Story structure, interviewing, research, editing workflow, fact-checking..."></textarea>
      </section>

      <!-- LINE 3 -->
      <section class="card big">
        <h2>üíº Line 3 ‚Äî Experience</h2>
        <div class="muted">Summarize your real experience (roles, projects, internships, episodes, channels).</div>
        <textarea id="experience" placeholder="Example: Student reporter, podcast producer, internship at local station..."></textarea>
      </section>

      <!-- LINE 4 -->
      <section class="card big">
        <h2>‚≠ê Line 4 ‚Äî Skills (Media Creation)</h2>
        <div class="muted">Keep it media-focused. (editing, audio, camera, writing, design)</div>
        <textarea id="skills" placeholder="Example: Premiere/Final Cut, photography, scripting, AP style, social media..."></textarea>
      </section>

      <!-- LINE 5 + PORTAL -->
      <section class="card big">
        <h2>üß© Line 5 ‚Äî Abilities to Contribute</h2>
        <div class="muted">What can you do for the network? (collab, build, QA, produce, mentor)</div>
        <textarea id="contribute" placeholder="Example: I can storyboard, edit weekly, help with QA, and collaborate on releases."></textarea>

        <div class="split" style="margin-top:10px;">
          <div>
            <label for="interest">Most Interested Portal</label>
            <select id="interest">
              <option value="Emerald">Emerald</option>
              <option value="Amethyst">Amethyst</option>
              <option value="Onyx">Onyx</option>
              <option value="Ruby">Ruby</option>
              <option value="Sapphire">Sapphire</option>
            </select>
          </div>
          <div>
            <label>Portal Preview (tap)</label>
            <div class="portalRow" id="portalRow">
              <div class="portalChip" data-portal="Emerald">
                <div><span class="dot" style="background:var(--emerald)"></span>Emerald</div>
                <div class="chipTag">Engagement</div>
              </div>
              <div class="portalChip" data-portal="Amethyst">
                <div><span class="dot" style="background:var(--amethyst)"></span>Amethyst</div>
                <div class="chipTag">Studio</div>
              </div>
              <div class="portalChip" data-portal="Onyx">
                <div><span class="dot" style="background:#111"></span>Onyx</div>
                <div class="chipTag">Vault</div>
              </div>
              <div class="portalChip" data-portal="Ruby">
                <div><span class="dot" style="background:var(--ruby)"></span>Ruby</div>
                <div class="chipTag">Tasks</div>
              </div>
              <div class="portalChip" data-portal="Sapphire">
                <div><span class="dot" style="background:var(--sapphire)"></span>Sapphire</div>
                <div class="chipTag">Economy</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- OUTPUT -->
      <section class="card big">
        <h2>üßæ OUTPUT (Printer Friendly)</h2>
        <div class="muted">This is what they copy/email back to you.</div>
        <textarea id="output" class="outputBox" placeholder="Press Generate Output (coming in Step 2/3)..." spellcheck="false"></textarea>

        <div class="adminRow" style="margin-top:10px;">
          <button class="btn primary" id="genBtn" type="button">‚ú® Generate Output</button>
          <button class="btn" id="clearBtn" type="button">üßΩ Clear</button>
        </div>

        <div class="footer">Property of SLDConnect 2023</div>
      </section>
    </div>
  </div>

  <!-- MODAL -->
  <div class="overlay" id="overlay" data-open="false" role="dialog" aria-modal="true" aria-labelledby="mTitle">
    <div class="modal" id="modal">
      <div class="mHead">
        <div>
          <div class="mTitle" id="mTitle">Portal</div>
          <div class="mSub" id="mSub">Description</div>
        </div>
        <button class="mClose" id="mClose" type="button" aria-label="Close">√ó</button>
      </div>
      <div class="mBody">
        <div class="mText" id="mText">‚Ä¶</div>
      </div>
      <div class="mFoot">
        <button class="btn" id="mAppend" type="button">Append to Output</button>
        <button class="btn" id="mReplace" type="button">Replace Output</button>
      </div>
    </div>
  </div>

  <script>
  // =========================
  // SLDConnect Creator Intake ‚Äî Step 2/3 (JS)
  // - Exact 5-line "profile resume" output
  // - Portal chips open spring modal w/ soft ripple
  // - Append/Replace portal text into OUTPUT
  // - Copy / Print / Email (mailto; inject your email later)
  // - Signet: 1 click focuses first field; 3 taps toggles secret tray
  // =========================

  const $ = (id) => document.getElementById(id);

  // Fields
  const fullName   = $("fullName");
  const email      = $("email");
  const phone      = $("phone");
  const objective  = $("objective");
  const knowledge  = $("knowledge");
  const experience = $("experience");
  const skills     = $("skills");
  const contribute = $("contribute");
  const interest   = $("interest");

  // Output + buttons
  const output   = $("output");
  const genBtn   = $("genBtn");
  const clearBtn = $("clearBtn");
  const copyBtn  = $("copyBtn");
  const emailBtn = $("emailBtn");
  const printBtn = $("printBtn");

  // Signet + secret tray
  const signetBtn  = $("signetBtn");
  const secretTray = $("secretTray");

  // Portal chips
  const portalRow = $("portalRow");

  // Modal
  const overlay  = $("overlay");
  const modal    = $("modal");
  const mTitle   = $("mTitle");
  const mSub     = $("mSub");
  const mText    = $("mText");
  const mClose   = $("mClose");
  const mAppend  = $("mAppend");
  const mReplace = $("mReplace");

  let activePortalKey = "Emerald";
  let lastFocus = null;

  // ---------- Portal Descriptions (text-only) ----------
  const PORTALS = {
    Emerald: {
      sub: "Engagement + Games",
      text:
`Emerald is the engagement engine.
It turns participation into momentum:
‚Ä¢ missions ‚Ä¢ streaks ‚Ä¢ achievements ‚Ä¢ challenges
Emerald routes signals into CareOn through positive progress.`
    },
    Amethyst: {
      sub: "Creative Studio",
      text:
`Amethyst is the creation studio.
Teachers & creators build secure HTML mini-apps, templates, and classroom-ready experiences.
Fast iteration, high safety, clean publishing.`
    },
    Onyx: {
      sub: "Security Vault",
      text:
`Onyx is the trust vault.
It protects identities, access codes, and sensitive assets using roles + audit trails.
Onyx keeps Starlight safe and keeps admin power accountable.`
    },
    Ruby: {
      sub: "Task Completion Network",
      text:
`Ruby is the collaboration engine.
Creators complete tasks for projects:
‚Ä¢ micro-jobs ‚Ä¢ creative support ‚Ä¢ QA ‚Ä¢ builds
Work is tracked, validated, and rewarded through CareOn.`
    },
    Sapphire: {
      sub: "Economy Hub",
      text:
`Sapphire is the economy window.
It visualizes projects, investments, and ecosystem flows.
Sapphire grows Northstar without breaking ledger integrity.`
    }
  };

  // ---------- Output Builder (PRINTER FRIENDLY) ----------
  function valOrBlank(v){ return (v || "").trim() || "(blank)"; }

  function buildOutput(){
    const name = (fullName.value || "").trim() || "Creator Name";

    // EXACT STRUCTURE requested:
    // Line 1 intention/objective
    // Line 2 knowledge base
    // Line 3 experience
    // Line 4 skills media
    // Line 5 abilities to contribute
    // Bottom: most interested portal
    // Footer: Property of SLDConnect 2023
    return (
`${name}

1) Intention / Objective:
${valOrBlank(objective.value)}

2) Knowledge Base:
${valOrBlank(knowledge.value)}

3) Experience:
${valOrBlank(experience.value)}

4) Skills (Media Creation):
${valOrBlank(skills.value)}

5) Abilities to Contribute:
${valOrBlank(contribute.value)}

Most Interested Portal: ${interest.value}
Property of SLDConnect 2023`
    );
  }

  // ---------- Generate / Clear ----------
  genBtn.addEventListener("click", () => {
    output.value = buildOutput();
    output.focus();
  });

  clearBtn.addEventListener("click", () => {
    // Keep contact optional ‚Äî but clear all for a clean restart
    fullName.value = "";
    email.value = "";
    phone.value = "";
    objective.value = "";
    knowledge.value = "";
    experience.value = "";
    skills.value = "";
    contribute.value = "";
    interest.value = "Emerald";
    output.value = "";
    objective.focus();
  });

  // ---------- Copy ----------
  copyBtn.addEventListener("click", async () => {
    const txt = output.value || "";
    try{
      await navigator.clipboard.writeText(txt);
      copyBtn.textContent = "‚úÖ Copied";
      setTimeout(()=> copyBtn.textContent = "üìã Copy Output", 900);
    }catch{
      output.focus();
      output.select();
      document.execCommand("copy");
    }
  });

  // ---------- Print / Save PDF ----------
  printBtn.addEventListener("click", () => window.print());

  // ---------- Email Draft (inject your email later) ----------
  emailBtn.addEventListener("click", () => {
    const to = ""; // <-- inject your email later
    const subject = encodeURIComponent("SLDConnect Creator Profile Output");
    const body = encodeURIComponent(output.value || buildOutput());
    window.location.href = `mailto:${to}?subject=${subject}&body=${body}`;
  });

  // ---------- Signet Behavior ----------
  // 1 click: focus first field + gentle ‚Äúnot intimidating‚Äù
  signetBtn.addEventListener("click", () => {
    objective.focus();
  });

  // 3 taps: toggle secret tray (matches your reference pattern)
  const tapState = { taps: 0, timer: null };
  signetBtn.addEventListener("click", () => {
    tapState.taps++;
    if (tapState.timer) clearTimeout(tapState.timer);
    tapState.timer = setTimeout(() => tapState.taps = 0, 1200);
    if (tapState.taps >= 3){
      tapState.taps = 0;
      secretTray.classList.toggle("active");
    }
  });

  // ---------- Modal (spring + ripple) ----------
  function openModal(key, rx=50, ry=30){
    activePortalKey = key;
    const p = PORTALS[key];

    // set ripple origin
    modal.style.setProperty("--rx", rx + "%");
    modal.style.setProperty("--ry", ry + "%");

    mTitle.textContent = `${key} Portal`;
    mSub.textContent = p.sub;
    mText.textContent = p.text;

    overlay.dataset.open = "true";
    lastFocus = document.activeElement;
    mClose.focus();
  }

  function closeModal(){
    overlay.dataset.open = "false";
    if (lastFocus) lastFocus.focus();
  }

  // click outside closes
  overlay.addEventListener("click", (e) => {
    if (e.target === overlay) closeModal();
  });
  mClose.addEventListener("click", closeModal);

  // ESC closes
  document.addEventListener("keydown", (e) => {
    if (overlay.dataset.open === "true" && e.key === "Escape") closeModal();
  });

  // Portal chip click ‚Üí open modal with ripple from click point
  portalRow.addEventListener("click", (e) => {
    const chip = e.target.closest(".portalChip");
    if (!chip) return;
    const key = chip.dataset.portal;

    const rect = chip.getBoundingClientRect();
    const cx = ((e.clientX - rect.left) / rect.width) * 100;
    const cy = ((e.clientY - rect.top) / rect.height) * 100;

    openModal(key, Math.max(5, Math.min(95, cx)), Math.max(5, Math.min(95, cy)));
  });

  // Append / Replace modal text into output (optional, but useful for testers)
  mReplace.addEventListener("click", () => {
    output.value = PORTALS[activePortalKey].text.trim();
    closeModal();
    output.focus();
  });

  mAppend.addEventListener("click", () => {
    const chunk = PORTALS[activePortalKey].text.trim();
    if (!output.value.trim()){
      output.value = chunk;
    } else {
      output.value = output.value.trimEnd() + "\n\n" + chunk;
    }
    closeModal();
    output.focus();
  });

  // ---------- Optional: autosync output when interest changes (non-intrusive) ----------
  // If output already exists, update the bottom portal line only.
  interest.addEventListener("change", () => {
    if (!output.value.trim()) return;
    const lines = output.value.split("\n");
    const idx = lines.findIndex(l => l.startsWith("Most Interested Portal:"));
    if (idx >= 0) lines[idx] = `Most Interested Portal: ${interest.value}`;
    output.value = lines.join("\n");
  });
</script>
  <script>
    // JS goes in Step 2/3
  </script>
</body>
</html>